(this.webpackJsonpexercise=this.webpackJsonpexercise||[]).push([[0],{121:function(e,t,a){},122:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),c=a.n(i),s=(a(121),a(32)),u=a(33),o=a(35),l=a(34),h=(a(122),a(56)),d=a(113),j=a(57),b=a(31),g=a(197),p=a(199),m=a(198),O=a(200),f=a(115),v=a(6),w=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(m.a,{onFinish:function(t){return e.props.add(t)},children:[Object(v.jsx)(m.a.Item,{label:"name",name:"name",rules:[{required:!0}],children:Object(v.jsx)(O.a,{})}),Object(v.jsx)(m.a.Item,{label:"weight",name:"weight",rules:[{required:!0}],children:Object(v.jsx)(O.a,{})}),Object(v.jsx)(m.a.Item,{label:"value",name:"value",rules:[{required:!0}],children:Object(v.jsx)(O.a,{})}),Object(v.jsx)(m.a.Item,{children:Object(v.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Add Data"})})]})}}]),a}(r.a.Component),S=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.a.TextArea,{value:this.props.json,onChange:function(t){return e.props.handleRawDataChange(t)}}),Object(v.jsx)(f.a,{type:"primary",onClick:function(){e.props.save(e.props.json)},children:"Submit Raw Data"})]})}}]),a}(r.a.Component),x=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.TreeMapAlgorithm()},n.componentDidUpdate=function(e){e.column===n.props.column&&JSON.stringify(n.props.dataSource)===JSON.stringify(e.dataSource)||n.TreeMapAlgorithm()},n.TreeMapAlgorithm=function(){var e=n.props,t=e.dataSource,a=e.column,r=[],i=t.reduce((function(e,t){return e+t.weight}),0);t.sort((function(e,t){return t.weight-e.weight}));for(var c=Math.max(Math.ceil(i/a),t[0].weight),s=t;s.length>0;){if(s.length+r.length===a){Object(h.a)(s).map((function(e){return r.push([e])}));break}for(var u=0,o=[],l=0;l<s.length&&(c-u>=s[l].weight?(o.push(s[l]),u+=s[l].weight,s=s.slice(1),console.log(u," ",c)):l++,s.length+r.length+1!==a););if(c-u!==0)for(var d=function(e){if(s[e].weight>c-u)return o.push(s[e+1]),s=s.filter((function(t,a){return a!==e+1})),0===r.length&&(c=o.reduce((function(e,t){return e+t.weight}),0)),"break"},j=s.length-2;j>0;j--){if("break"===d(j))break}r.push(o),console.log("tree",r)}n.setState({tree:r,divider:c})},n.state={tree:[],divider:0},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return this.state.tree.map((function(t){return Object(v.jsx)(j.a,{children:t.map((function(t){return Object(v.jsxs)(b.a,{style:t.value<0?{backgroundColor:"red",border:"solid"}:{backgroundColor:"green",border:"solid"},flex:t.weight/e.state.divider,children:[Object(v.jsx)("p",{children:t.name}),Object(v.jsx)("p",{children:t.value})]})}))})}))}}]),a}(r.a.Component),D=[{name:"A",weight:3,value:-.02},{name:"B",weight:3,value:.05},{name:"C",weight:6,value:.015},{name:"D",weight:2,value:-.01},{name:"E",weight:3,value:.01},{name:"j",weight:9,value:.1}],y=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleAddData=function(e){var t=n.handleValidate(e);t.length>0?d.a.error({message:"Create Data Failed",description:t.join(".")}):(n.setState({rawData:JSON.stringify(n.state.dataSource),dataSource:[].concat(Object(h.a)(n.state.dataSource),[{name:e.name,weight:Number(e.weight),value:Number(e.value)}])}),d.a.success({message:"Create Data Success"}))},n.handleSaveRawData=function(e){try{var t=JSON.parse(e),a=t.reduce((function(e,t){var a=n.handleValidate(t);return[].concat(Object(h.a)(e),Object(h.a)(a))}),[]);if(a.length>0)return d.a.error({message:"Save Raw Data Failed",description:Array.from(new Set(a)).join(".")}),void n.setState({rawData:JSON.stringify(n.state.dataSource)});n.setState({dataSource:t}),d.a.success({message:"Save Raw Data Success"})}catch(r){d.a.error({message:"Save Raw Data Failed",description:"must be valid JSON"}),n.setState({rawData:JSON.stringify(n.state.dataSource)})}},n.handleValidate=function(e){var t=[];return e.name&&e.name.length>50&&t.push("data.name must be string and less than 50 characters"),e.weight&&isNaN(Number(e.weight))&&t.push("data.weight must be integer"),n.state.dataSource.length>50&&t.push("array.length <= 50"),t},n.handleRawDataChange=function(e){n.setState({rawData:e.target.value})},n.state={rawData:JSON.stringify(D),dataSource:D,row:3},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{span:8,children:[Object(v.jsx)(g.a,{title:"Data Input",children:Object(v.jsx)(w,{add:function(t){return e.handleAddData(t)}})}),Object(v.jsx)(g.a,{title:"Raw Data Input",children:Object(v.jsx)(S,{save:function(t){return e.handleSaveRawData(t)},json:this.state.rawData,handleRawDataChange:function(t){return e.handleRawDataChange(t)}})})]}),Object(v.jsx)(b.a,{span:16,children:Object(v.jsx)(g.a,{extra:Object(v.jsx)(p.a,{value:this.state.row,onChange:function(t){return e.setState({row:t})},min:1,max:this.state.dataSource.length}),children:Object(v.jsx)(x,{dataSource:this.state.dataSource,column:this.state.row})})})]})}}]),a}(r.a.Component),C=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(y,{})})}}]),a}(r.a.Component),k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,201)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root")),k()}},[[195,1,2]]]);
//# sourceMappingURL=main.2015808e.chunk.js.map